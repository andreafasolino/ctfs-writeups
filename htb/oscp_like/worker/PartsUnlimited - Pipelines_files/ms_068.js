"use strict";define("Wit/Common",["require","exports","VSS/Platform/Context","VSS/Platform/FPS","VSS/Platform/Location","react","VSS/Core/Observable","VSS/Platform/Trace","VSSUI/Button","VSSUI/Util"],function(e,t,o,n,r,i,s,a,l,c){var m,d,u,I,C,T,p,_,y,k,S,h,b,v,A,f,g,w,E,D,L;m=t.Resources={},Object.defineProperty(t,"__esModule",{value:!0}),t.Resources.NewWorkItem="New work item",t.Resources.NewQuery="New query",t.Resources.PinWorkItemType="Pin work item type",t.Resources.UnpinWorkItemType="Unpin work item type",t.ConstantsCustomerInteligence={},Object.defineProperty(t,"__esModule",{value:!0}),t.ConstantsCustomerInteligence.WITCustomerIntelligenceArea="WIT",(t.ConstantsCustomerInteligence.WITCustomerIntelligenceFeature||(t.ConstantsCustomerInteligence.WITCustomerIntelligenceFeature={})).RESULT_FILTER="ResultFilter",function(e){t.CreateMenuProvider={},Object.defineProperty(t,"__esModule",{value:!0});o.Services.add("work-create-menu-provider",{serviceFactory:class extends o.VssService{constructor(){super(...arguments),this.menuItems=[]}_serviceStart(e){super._serviceStart(e);const t=this.pageContext.getService("ITfsPageService").getData();t&&t.project&&this.menuItems.push({groupKey:"app-actions",href:r.routeUrl(this.pageContext,"ms.vss-work-web.query-route",{project:t.project.name,view:"query-edit",action:"new",newQuery:"true"}),iconProps:{iconName:"QueryList"},id:"new-query",onActivate:(e,t)=>n.onClickFPS(this.pageContext,e.href,!0,t,{telemetrySource:"NavCreateMenu"}),rank:100,text:m.NewQuery})}getMenuItems(e){return"ms.vss-tfs-web.vertical-header-create-menu"===e?this.menuItems:null}}})}(),t.Dictionary={},Object.defineProperty(t,"__esModule",{value:!0}),t.GeneratedConstants={},Object.defineProperty(t,"__esModule",{value:!0}),(L=t.GeneratedConstants.CoreField||(t.GeneratedConstants.CoreField={}))[L.Id=-3]="Id",L[L.Rev=8]="Rev",L[L.Title=1]="Title",L[L.Description=52]="Description",L[L.WorkItemType=25]="WorkItemType",L[L.TeamProject=-42]="TeamProject",L[L.State=2]="State",L[L.Reason=22]="Reason",L[L.CreatedBy=33]="CreatedBy",L[L.AssignedTo=24]="AssignedTo",L[L.ChangedBy=9]="ChangedBy",L[L.ChangedDate=-4]="ChangedDate",L[L.CreatedDate=32]="CreatedDate",L[L.RevisedDate=-5]="RevisedDate",L[L.AuthorizedDate=3]="AuthorizedDate",L[L.AuthorizedAs=-1]="AuthorizedAs",L[L.History=54]="History",L[L.AreaPath=-7]="AreaPath",L[L.AreaId=-2]="AreaId",L[L.IterationPath=-105]="IterationPath",L[L.IterationId=-104]="IterationId",L[L.NodeName=-12]="NodeName",L[L.RelatedLinkCount=75]="RelatedLinkCount",L[L.HyperLinkCount=-32]="HyperLinkCount",L[L.AttachedFileCount=-31]="AttachedFileCount",L[L.ExternalLinkCount=-57]="ExternalLinkCount",L[L.CommentCount=-33]="CommentCount",L[L.LinkType=100]="LinkType",L[L.Tags=80]="Tags",L[L.Watermark=7]="Watermark",L[L.BoardColumn=90]="BoardColumn",L[L.BoardColumnDone=91]="BoardColumnDone",L[L.BoardLane=92]="BoardLane",L[L.IsDeleted=-404]="IsDeleted",(D=t.GeneratedConstants.CoreFieldRefNames||(t.GeneratedConstants.CoreFieldRefNames={})).AreaId="System.AreaId",D.AreaPath="System.AreaPath",D.AssignedTo="System.AssignedTo",D.AttachedFileCount="System.AttachedFileCount",D.AuthorizedAs="System.AuthorizedAs",D.BoardColumn="System.BoardColumn",D.BoardColumnDone="System.BoardColumnDone",D.BoardLane="System.BoardLane",D.ChangedBy="System.ChangedBy",D.ChangedDate="System.ChangedDate",D.CreatedBy="System.CreatedBy",D.CreatedDate="System.CreatedDate",D.Description="System.Description",D.CommentCount="System.CommentCount",D.ExternalLinkCount="System.ExternalLinkCount",D.History="System.History",D.HyperLinkCount="System.HyperLinkCount",D.Id="System.Id",D.IterationId="System.IterationId",D.IterationPath="System.IterationPath",D.LinkType="System.Links.LinkType",D.NodeName="System.NodeName",D.Reason="System.Reason",D.RelatedLinkCount="System.RelatedLinkCount",D.Rev="System.Rev",D.RevisedDate="System.RevisedDate",D.State="System.State",D.AuthorizedDate="System.AuthorizedDate",D.TeamProject="System.TeamProject",D.Tags="System.Tags",D.Title="System.Title",D.WorkItemType="System.WorkItemType",D.Watermark="System.Watermark",D.IsDeleted="System.IsDeleted",(E=t.GeneratedConstants.CoreLinkTypeReferenceNames||(t.GeneratedConstants.CoreLinkTypeReferenceNames={})).Related="System.LinkTypes.Related",E.Hierarchy="System.LinkTypes.Hierarchy",E.Dependency="System.LinkTypes.Dependency",E.Duplicate="System.LinkTypes.Duplicate",(w=t.GeneratedConstants.DalFields||(t.GeneratedConstants.DalFields={})).IDId=-3,w.RevId=8,w.TitleId=1,w.DescriptionId=52,w.WorkItemTypeId=25,w.PortfolioProjectId=-42,w.WorkItemFormIDId=-14,w.WorkItemFormId=-15,w.StateId=2,w.ReasonId=22,w.CreatedById=33,w.WatermarkId=7,w.AssignedToId=24,w.LastChangedById=9,w.LastChangedDateId=-4,w.AuthorizedDateId=3,w.CreatedDateId=32,w.RevisedDateId=-5,w.PersonNameId=-1,w.HistoryId=54,w.AreaPathId=-7,w.AreaIDId=-2,w.IterationPathId=-105,w.IterationIDId=-104,w.NodeNameId=-12,w.RelatedLinkCountId=75,w.RemoteLinkCountId=-34,w.LinkedFileCountId=-32,w.AttachedFileCountId=-31,w.CommentCountId=-33,w.BISURICountId=-57,w.Tags=80,w.BoardColumnId=90,w.BoardColumnDoneId=91,w.BoardLaneId=92,w.RelatedLinks=37,w.PersonID=-6,w.LinkedFiles=51,w.BISURI=58,w.AttachedFiles=50,w.HiddenAttachedFiles=49,w.AreaLevel1=-43,w.AreaLevel2=-44,w.AreaLevel3=-45,w.AreaLevel4=-46,w.AreaLevel5=-47,w.AreaLevel6=-48,w.AreaLevel7=-49,w.IterationLevel1=-50,w.IterationLevel2=-51,w.IterationLevel3=-52,w.IterationLevel4=-53,w.IterationLevel5=-54,w.IterationLevel6=-55,w.IterationLevel7=-56,w.IsDeleted=-404,w.ZZZDummyField=-58,(g=t.GeneratedConstants.FavoriteScopes||(t.GeneratedConstants.FavoriteScopes={})).WORK_PLANS="Work.Plans",g.WIT_QUERYITEMS="WorkItemTracking.Queries",g.VC_PATHS="VersionControl.Paths",g.BUILD_DEFINITIONS="Build.Definitions",g.PROJECTS="Classification.TeamProjects",g.TEAMS="Team.Teams",g.REPOSITORIES="VersionControl.Repositories",g.TEST_PLANS="TestManagement.Plans",(f=t.GeneratedConstants.FavoriteTypes||(t.GeneratedConstants.FavoriteTypes={})).WORK_PLAN="Microsoft.TeamFoundation.Work.Plans",f.WORK_ITERATION="Microsoft.TeamFoundation.Work.TeamIterations",f.WORK_TEAMBACKLOG="Microsoft.TeamFoundation.Work.TeamBacklogs",f.WORK_TEAMBOARD="Microsoft.TeamFoundation.Work.TeamBoardSets",f.WIT_QUERYITEM="Microsoft.TeamFoundation.WorkItemTracking.QueryItem",f.VC_PATH="Microsoft.TeamFoundation.VersionControl.Path",f.BUILD_DEFINITION="Microsoft.TeamFoundation.Build.Definition",f.BUILD_DEFINITION_INITIALIZED="Microsoft.TeamFoundation.Build.BuildDefinitionInitialized",f.PROJECT="Microsoft.TeamFoundation.Classification.TeamProject",f.TEAM="Microsoft.TeamFoundation.Teams.Team",f.TFVC_REPOSITORY="Microsoft.TeamFoundation.Tfvc.Repository",f.GIT_REPOSITORY="Microsoft.TeamFoundation.Git.Repository",f.TEST_PLAN="Microsoft.TeamFoundation.TestManagement.Plan",f.DASHBOARD="Microsoft.TeamFoundation.Dashboards.Dashboard",(A=t.GeneratedConstants.FieldType||(t.GeneratedConstants.FieldType={}))[A.Internal=0]="Internal",A[A.String=1]="String",A[A.Integer=2]="Integer",A[A.DateTime=3]="DateTime",A[A.PlainText=5]="PlainText",A[A.Html=7]="Html",A[A.TreePath=8]="TreePath",A[A.History=9]="History",A[A.Double=10]="Double",A[A.Guid=11]="Guid",A[A.Boolean=12]="Boolean",A[A.PicklistInteger=14]="PicklistInteger",A[A.PicklistString=15]="PicklistString",(v=t.GeneratedConstants.FollowsConstants||(t.GeneratedConstants.FollowsConstants={})).ArtifactType="WorkItem",v.UnfollowResult="UnfollowResult",(b=t.GeneratedConstants.FormLayoutType||(t.GeneratedConstants.FormLayoutType={}))[b.Desktop=0]="Desktop",b[b.Mobile=1]="Mobile",(h=t.GeneratedConstants.OobFieldRefNames||(t.GeneratedConstants.OobFieldRefNames={})).BacklogPriority="Microsoft.VSTS.Common.BacklogPriority",h.StackRank="Microsoft.VSTS.Common.StackRank",h.ActivatedBy="Microsoft.VSTS.Common.ActivatedBy",h.ActivatedDate="Microsoft.VSTS.Common.ActivatedDate",h.ClosedBy="Microsoft.VSTS.Common.ClosedBy",h.ClosedDate="Microsoft.VSTS.Common.ClosedDate",h.ResolvedBy="Microsoft.VSTS.Common.ResolvedBy",h.ResolvedDate="Microsoft.VSTS.Common.ResolvedDate",h.StateChangeDate="Microsoft.VSTS.Common.StateChangeDate",(S=t.GeneratedConstants.QueriesConstants||(t.GeneratedConstants.QueriesConstants={})).LastVisitedQueryGroupKey="LAST_VISITED_QUERY_GROUP",S.MyFavoritesGroupKey="MY_FAVORITES_GROUP",S.LastVisitedQueryMruKey="Queries/LastVisited",S.TeamFavoriteGroupsExpandStatesMruKey="Queries/FavoriteGroupExpandStates",(k=t.GeneratedConstants.UnfollowResultStatus||(t.GeneratedConstants.UnfollowResultStatus={}))[k.unfollowFailed=0]="unfollowFailed",k[k.unfollowSuccess=1]="unfollowSuccess",(y=t.GeneratedConstants.WellKnownControlNames||(t.GeneratedConstants.WellKnownControlNames={})).HtmlControl="HtmlFieldControl",y.PlainTextControl="PlainTextControl",y.FreshnessIndicatorControl="FreshnessIndicatorControl",y.FieldControl="FieldControl",y.DateControl="DateTimeControl",y.ClassificationControl="WorkItemClassificationControl",y.WorkItemLogControl="WorkItemLogControl",y.WorkItemHistoryControl="WorkItemHistoryControl",y.WorkItemStateGraphControl="WorkItemStateGraphControl",y.LinksControl="LinksControl",y.AttachmentsControl="AttachmentsControl",y.WebpageControl="WebpageControl",y.LabelControl="LabelControl",y.TagFieldControl="TagFieldControl",y.TestStepsControl="TestStepsControl",y.AssociatedAutomationControl="AssociatedAutomationControl",y.StageControl="StageControl",y.StageBuildControl="StageBuildControl",y.ReleaseBuildControl="ReleaseBuildControl",y.AcceptanceCriteriaControl="AcceptanceCriteriaControl",y.DevelopmentControl="DevelopmentControl",y.WorkItemDiscussionControl="WorkItemDiscussionControl",y.ParameterSetControl="ParameterSetControl",(_=t.GeneratedConstants.WITCommonConstants||(t.GeneratedConstants.WITCommonConstants={})).LinkTypes="LinkTypes",_.WorkItemTypes="WorkItemTypes",_.Nodes="Nodes",_.Fields="Fields",_.AllowedValues="AllowedValues",_.ConstantSets="ConstantSets",_.WorkItemTypeCategories="WorkItemTypeCategories",_.TeamProjects="TeamProjects",_.AdhocQueries="AdhocQueries",(t.GeneratedConstants.WorkItemFeatureStateConstants||(t.GeneratedConstants.WorkItemFeatureStateConstants={})).DataProviderName="ms.vss-work-web.work-item-feature-state-data-provider",(p=t.GeneratedConstants.WorkItemFormContributionProperties||(t.GeneratedConstants.WorkItemFormContributionProperties={})).ShowOnDeletedWorkItem="showOnDeletedWorkItem",p.Height="height",p.Name="name",p.Inputs="inputs",p.InputId="id",p.InputRequired="isRequired",p.InputMode="inputMode",p.InputValidation="validation",p.InputDataType="dataType",p.InputDescription="description",p.InputType="type",p.InputProperties="properties",p.InputType_WorkItemField="WorkItemField",p.FieldType="Field",p.InputProperties_WorkItemFieldTypes="workItemFieldTypes",(T=t.GeneratedConstants.WorkItemFormExtensionsConstants||(t.GeneratedConstants.WorkItemFormExtensionsConstants={})).ContributionDefaultHeight_Group=150,T.ContributionDefaultHeight_Control=75,T.ContributionTarget_Form="ms.vss-work-web.work-item-form",T.ContributionType_Page="ms.vss-work-web.work-item-form-page",T.ContributionType_Group="ms.vss-work-web.work-item-form-group",T.ContributionType_Control="ms.vss-work-web.work-item-form-control",T.ContributionType_Notifications="ms.vss-work-web.work-item-notifications",(C=t.GeneratedConstants.WorkItemLinkConstants||(t.GeneratedConstants.WorkItemLinkConstants={})).RESOURCELINKTYPES=["Hyperlink","ArtifactLink"],C.WORKITEMLINKUSAGE="workItemLink",C.RESOURCELINKUSAGE="resourceLink",C.ATTACHEDLINKTYPE="AttachedFile",C.HYPERLINKLINKTYPE="Hyperlink",C.ARTIFACTLINKTYPE="ArtifactLink",C.EXTERNALLINKTYPE="ExternalLink",C.ATTRIBUTES_USAGE="usage",C.ATTRIBUTES_EDITABLE="editable",C.ATTRIBUTES_ENABLED="enabled",C.ATTRIBUTES_ACYCLIC="acyclic",C.ATTRIBUTES_DIRECTIONAL="directional",C.ATTRIBUTES_SINGLETARGET="singleTarget",C.ATTRIBUTES_TOPOLOGY="topology",C.ATTRIBUTES_ID="id",C.ATTRIBUTES_AUTHORIZEDDATE="authorizedDate",C.ATTRIBUTES_RESOURCECREATEDDATE="resourceCreatedDate",C.ATTRIBUTES_RESOURCEMODIFIEDDATE="resourceModifiedDate",C.ATTRIBUTES_REVISEDDATE="revisedDate",C.ATTRIBUTES_RESOURCESIZE="resourceSize",C.ATTRIBUTES_COMMENT="comment",C.ATTRIBUTES_NAME="name",C.ATTRIBUTES_ISLOCKED="isLocked",(I=t.GeneratedConstants.WorkItemSettingsConstants||(t.GeneratedConstants.WorkItemSettingsConstants={})).DataProviderName="ms.vss-work-web.work-item-settings-data-provider",I.Path="WorkItemTracking/Settings",(u=t.GeneratedConstants.WorkItemTypeIcons||(t.GeneratedConstants.WorkItemTypeIcons={})).WorkItemTypeIconNames=["icon_clipboard","icon_crown","icon_trophy","icon_list","icon_book","icon_sticky_note","icon_insect","icon_traffic_cone","icon_chat_bubble","icon_flame","icon_megaphone","icon_code_review","icon_code_response","icon_review","icon_response","icon_test_plan","icon_test_suite","icon_test_case","icon_test_step","icon_test_parameter","icon_star","icon_ribbon","icon_chart","icon_headphone","icon_key","icon_airplane","icon_car","icon_diamond","icon_asterisk","icon_database_storage","icon_government","icon_gavel","icon_parachute","icon_paint_brush","icon_palette","icon_gear","icon_check_box","icon_gift","icon_test_beaker","icon_broken_lightbulb","icon_clipboard_issue"],u.DefaultWorkItemTypeIconName="icon_clipboard",function(e){t.QueryFavoriteProviderDataService={},Object.defineProperty(t,"__esModule",{value:!0});o.Services.add("query-favorite-provider-data-service",{serviceFactory:class extends o.VssService{getArtifactType(){return"Microsoft.TeamFoundation.WorkItemTracking.QueryItem"}getToolTipOnHover(e){return`${e.artifactScope.name}(${(e.artifactProperties||{}).QueryPath})`}}})}(),function(e){function o(e,t,o){if(void 0===t)return!1;o=o||n;for(var r=0,i=e.length;r<i;r++)if(void 0!==e[r]&&0===o(e[r],t))return!0;return!1}function n(e,t){return e==t?0:e>t?1:-1}function r(e,t){t=t||n,e.sort(t);for(var o=1,r=e.length;o<r;o++)0===t(e[o],e[o-1])&&(e.splice(o--,1),r--);return e}t.UtilitiesArray={},Object.defineProperty(t,"__esModule",{value:!0}),t.UtilitiesArray.subtract=function(e,t,n){var r,i;if(!t||0===t.length)return e;i=[];for(var s=0,a=e.length;s<a;s++)o(t,r=e[s],n)||(i[i.length]=r);return i},t.UtilitiesArray.contains=o,t.UtilitiesArray.defaultComparer=n,t.UtilitiesArray.uniqueSort=r,t.UtilitiesArray.unique=function(e,t){const o=e.slice(0);return r(o,t),o}}(),function(e){t.UtilitiesCore={},Object.defineProperty(t,"__esModule",{value:!0}),t.UtilitiesCore.convertValueToDisplayString=function(e,t){return null!=e?"string"==typeof e?e:e instanceof Date?t?e.toLocaleString(t):e.toLocaleString():"number"==typeof e?t?new Date(e).toLocaleString(t):e.toLocaleString():"boolean"==typeof e?e?"True":"False":e.toString():""}}(),function(e){d=t.WorkItemTypeColorAndIcons={},Object.defineProperty(t,"__esModule",{value:!0});class o{static createColorAndIcon(e,t){return{color:this._transformColor(e),icon:this._transformIcon(t)}}static getDefault(){return{color:o.DEFAULT_WORKITEMTYPE_COLOR,icon:o.DEFAULT_WORKITEMTYPE_BOWTIE_ICON}}static _transformColor(e){return e?`#${e.substr(e.length-6)}`:o.DEFAULT_WORKITEMTYPE_COLOR}static _transformIcon(e){return(e=(e||"").trim().toLowerCase())&&o.ICON_NAME_MAPPINGS[e]?o.ICON_NAME_MAPPINGS[e]:o.DEFAULT_WORKITEMTYPE_BOWTIE_ICON}}o.ICON_NAME_MAPPINGS={icon_crown:"bowtie-symbol-crown",icon_trophy:"bowtie-symbol-trophy",icon_list:"bowtie-symbol-list",icon_book:"bowtie-symbol-book",icon_sticky_note:"bowtie-symbol-stickynote",icon_clipboard:"bowtie-symbol-task",icon_insect:"bowtie-symbol-bug",icon_traffic_cone:"bowtie-symbol-impediment",icon_chat_bubble:"bowtie-symbol-review",icon_flame:"bowtie-symbol-flame",icon_megaphone:"bowtie-symbol-ask",icon_test_plan:"bowtie-test-plan",icon_test_suite:"bowtie-test-suite",icon_test_case:"bowtie-test-case",icon_test_step:"bowtie-test-step",icon_test_parameter:"bowtie-test-parameter",icon_code_review:"bowtie-symbol-review-request",icon_code_response:"bowtie-symbol-review-response",icon_review:"bowtie-symbol-feedback-request",icon_response:"bowtie-symbol-feedback-response",icon_ribbon:"bowtie-symbol-ribbon",icon_chart:"bowtie-symbol-finance",icon_headphone:"bowtie-symbol-headphone",icon_key:"bowtie-symbol-key",icon_airplane:"bowtie-symbol-airplane",icon_car:"bowtie-symbol-car",icon_diamond:"bowtie-symbol-diamond",icon_asterisk:"bowtie-symbol-asterisk",icon_database_storage:"bowtie-symbol-storage-database",icon_government:"bowtie-symbol-government",icon_gavel:"bowtie-symbol-decision",icon_parachute:"bowtie-symbol-parachute",icon_paint_brush:"bowtie-symbol-paint-brush",icon_palette:"bowtie-symbol-color-palette",icon_gear:"bowtie-settings-gear",icon_check_box:"bowtie-status-success-box",icon_gift:"bowtie-package-fill",icon_test_beaker:"bowtie-test-fill",icon_broken_lightbulb:"bowtie-symbol-defect",icon_clipboard_issue:"bowtie-symbol-issue"},o.DEFAULT_UNPARENTED_WORKITEM_COLOR="#A6A6A6",o.DEFAULT_UNPARENTED_WORKITEM_BOWTIE_ICON="bowtie-square",o.DEFAULT_WORKITEMTYPE_COLOR_HEX="009CCC",o.DEFAULT_WORKITEMTYPE_COLOR=`#${o.DEFAULT_WORKITEMTYPE_COLOR_HEX}`,o.DEFAULT_WORKITEMTYPE_ICON="icon_clipboard",o.DEFAULT_WORKITEMTYPE_BOWTIE_ICON=o.ICON_NAME_MAPPINGS[o.DEFAULT_WORKITEMTYPE_ICON],t.WorkItemTypeColorAndIcons.WorkItemTypeColorAndIcons=o}(),function(e){t.WorkItemHeaderActions={},Object.defineProperty(t,"__esModule",{value:!0});o.Services.add("work-item-action-service",{serviceFactory:class extends o.VssService{constructor(){super(...arguments),this._topLevelMenuItems=new s.ObservableArray,this._unpinnedMenuItems=new s.ObservableArray,this._typeMenuItems=[],this._pinnedItems=[],this.renderMenuCell=((e,t,o)=>{switch(e){case 4:return i.createElement("span",{className:c.css(t.pinned&&"bolt-list-cell-content-reveal"),onKeyDown:e=>{e.defaultPrevented||37===e.which&&e.preventDefault()}},i.createElement(l.Button,{ariaLabel:t.pinned?m.UnpinWorkItemType:m.PinWorkItemType,iconProps:{iconName:t.pinned?"Unpin":"Pin"},onClick:e=>{e.defaultPrevented||(this._processPinClick(t,o),e.preventDefault())},subtle:!0}))}})}_serviceStart(e){super._serviceStart(e);const t=e.getService("ITfsPageService"),o=t.getData();let n,r,i;if(o){o.project&&(n=o.project.name);const e=t.getHorizontalNavigationTeamData();e&&(r=e.name)}this.pageContext.getService("IVssContributionService").getDataAsync("ms.vss-work-web.new-workitem-data-provider").then(e=>{if((i=e||{}).hasNewWorkItemPermission&&i.workItemTypes){this._settingsService=this.pageContext.getService("ITfsNavigationSettingsService");let e=this._settingsService.getUserSetting("PinnedWorkAction");if(e||(e=i.defaultMenuItem?[`new-workitem-${i.defaultMenuItem}`]:[]),this._pinnedItems=e,n&&i&&i.workItemTypes){const e=this.pageContext.getService("IVssLocationService");for(let t=0;t<i.workItemTypes.length;t++)this._typeMenuItems.push(this._createMenuItem(n,r,e,i,i.workItemTypes[t]));this._typeMenuItems.sort((e,t)=>e.text&&t.text?e.text.localeCompare(t.text):0);for(const e of this._typeMenuItems)e.pinned?this._topLevelMenuItems.push(e):this._unpinnedMenuItems.push(e)}this._newWorkItem={id:"new-work-item",rank:200,text:m.NewWorkItem,groupKey:"wit-actions",subMenuProps:{id:"new-work-item-unpinned",items:this._unpinnedMenuItems}},this._unpinnedMenuItems.length&&this._topLevelMenuItems.splice(0,0,this._newWorkItem)}})}getMenuItems(e){return"ms.vss-tfs-web.vertical-header-create-menu"===e?this._topLevelMenuItems:null}_createMenuItem(e,t,o,n,r){const i=`new-workitem-${r.replace(/[\s()]/g,"-").toLowerCase()}`,s={project:e,parameters:r.toLowerCase()};t&&(s.team=t);const l={groupKey:"wit-actions",href:o.routeUrl("ms.vss-work-web.work-items-create-route",s),id:i,pinned:-1!==this._pinnedItems.indexOf(i),rank:201,renderMenuCell:this.renderMenuCell,text:r};if(n.colorAndIcons){const e=this._getWorkItemTypeColorAndIcon(n,r);e&&(l.iconProps={className:c.css("bowtie-icon",e.icon),style:{color:e.color}})}return l.onActivate=((e,t)=>{if(!t.ctrlKey&&!t.shiftKey)return this.pageContext.getService("IVssContributionService").getService("ms.vss-work-web.work-item-service").then(e=>{if(!e)throw new Error("Cannot create work item creation service");e.createWorkItem(r)},e=>{a.traceException(this.pageContext,"WIT","WorkItemCreationFromNavigation",e)}),t.preventDefault(),!0}),l}_getWorkItemTypeColorAndIcon(e,t){if((t=t.trim().toLowerCase())&&e.colorAndIcons){const o=e.colorAndIcons[t];return o&&o.icon?d.WorkItemTypeColorAndIcons.createColorAndIcon(o.color,o.icon):d.WorkItemTypeColorAndIcons.getDefault()}}_insertMenuItem(e,t){let o=0;for(;o<t.length;o++)if(t.value[o]!==this._newWorkItem&&e.text.localeCompare(t.value[o].text)<0){t.splice(o,0,e);break}o===t.length&&t.push(e)}_processPinClick(e,t){const o=e.id;e.pinned?(this._topLevelMenuItems.splice(this._topLevelMenuItems.value.indexOf(e),1),this._insertMenuItem(e,this._unpinnedMenuItems),this._pinnedItems.splice(this._pinnedItems.indexOf(o),1),1===this._unpinnedMenuItems.length&&this._topLevelMenuItems.splice(0,0,this._newWorkItem),t.menu.focus()):(this._unpinnedMenuItems.splice(this._unpinnedMenuItems.value.indexOf(e),1),this._insertMenuItem(e,this._topLevelMenuItems),this._pinnedItems.push(o),0===this._unpinnedMenuItems.length?(t.menu.getParent().focus(),this._topLevelMenuItems.splice(this._topLevelMenuItems.value.indexOf(this._newWorkItem),1)):t.menu.focus()),this._settingsService.setUserSetting("PinnedWorkAction",this._pinnedItems),e.pinned=!e.pinned}}})}()},["Resources","Constants/CustomerInteligence","CreateMenuProvider","Dictionary","Generated/Constants","QueryFavoriteProviderDataService","Utilities/Array","Utilities/Core","WorkItemTypeColorAndIcons","WorkItemHeaderActions"]),document.dispatchEvent(new CustomEvent("scriptLoaded",{cancelable:!1,detail:{id:"ms.vss-work-web.common-content"}}));