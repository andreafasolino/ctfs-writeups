"use strict";define("Release/Sharedcontributions",["require","exports","react","VSS/Legacy/Legacy","VSS/Platform/Layout","VSS/Platform/Context","react-dom","VSS/Core/Observable","VSS/Platform/Components/Format","VSS/Platform/Location"],function(e,t,n,s,r,a,o,i,c,l){var u;u=t.Resources={},Object.defineProperty(t,"__esModule",{value:!0}),t.Resources.ConcurrencyMessageFormat="Weâ€™ll soon resume enforcing limits on parallel jobs run by self-hosted agents. To learn more, see {0} and {1}.",t.Resources.ConcurrencyDocumentLinkName="our documentation",t.Resources.CocurrentJobLimitsLinkName="view your limits",t.Resources.ConcurrencyDocumentLink="https://aka.ms/concurrency-limits",function(e){t.ReleaseMenuService={},Object.defineProperty(t,"__esModule",{value:!0});a.Services.add("release-menu-service",{serviceFactory:class extends a.VssService{constructor(){super(),this._prefetchCreateReleasePanel=(()=>{const e=document.createElement("div");let t=n.createElement(r.ReactRootComponent,{pageContext:this.pageContext},n.createElement(s.LegacyComponent,{modules:["ReleasePipeline/Scripts/TFS.ReleaseManagement.BuildIntegration","PipelineWorkflow/Scripts/SharedComponents/CreateRelease/CreateReleaseExtension","PipelineWorkflow/Scripts/Shared/LegacyLWP/PrefetchPipelineWorkFlow"],wrappedType:"prefetch-create-release-panel",dependentContributionIds:["ms.vss-releaseManagement-web.release-service-data-external"],dependencies:["ms.vss-web.legacy-vss-ui-content","ms.vss-work-web.common-content"]}));o.render(t,e)}),setTimeout(()=>{this._prefetchCreateReleasePanel()},500)}loadItems(e,t){}createRelease(e){const t=this.pageContext.getService("IVssPerformanceService"),r="CD",a="VSO.CD.OpenCreateReleaseDialog";t.startScenario(a,!0),this.pageContext.getService("IVssLayoutManager").renderCallout(()=>n.createElement(s.LegacyComponent,{modules:["ReleasePipeline/Scripts/TFS.ReleaseManagement.BuildIntegration"],wrappedType:"createReleaseDialog",dependentContributionIds:["ms.vss-releaseManagement-web.release-service-data-external"],buildDetails:e,endPerfScenario:()=>t.endScenario(r,a,!0),vssPageContext:this.pageContext},null))}}})}(),function(e){t.RunActionService={},Object.defineProperty(t,"__esModule",{value:!0});class n extends a.VssService{constructor(){super(...arguments),this._items=new i.ObservableArray}getMenuItems(e,t){return this._items.removeAll(),t&&"ms.vss-build-web.run-actions"===e&&this._initializeBuild(t),this._items}async _initializeBuild(e){const t=this.pageContext.getService("IVssContributionService");await t.getContributionAsync("ms.vss-releaseManagement-web.release-service-location");const n=this.pageContext.getRestClient("IReleaseRestClient");if((await n.getReleaseDefinitions(e.projectId,void 0,void 0,"Build",`${e.projectId}:${e.pipelineId}`,1)).length>0&&2===e.result&&2===e.status){const t=this.pageContext.getRestClient("IBuildRestClient"),n=await t.getBuild(e.projectId,e.runId);this._items.push({id:"run-release-action",text:"Release",important:!1,onActivate:()=>{this.pageContext.getService("release-menu-service").createRelease(n)}})}}}t.RunActionService.RunActionService=n,a.Services.add("release-run-action-service",{serviceFactory:n})}(),function(e){t.ComponentsPipelineBillingMessageBanner={},Object.defineProperty(t,"__esModule",{value:!0});class s extends r.VssComponent{constructor(e,t){super(e,t),this.concurrentJobsLink=l.routeUrl(this.context.pageContext,"ms.vss-build-web.build-release-collection-admin-route-new",{_a:"concurrentJobs"})}render(){return n.createElement("div",{className:"pipelinebilling-message-banner flex flex-grow fontSizeM info-message"},n.createElement(c.FormatComponent,{className:"concurrency-message",format:u.ConcurrencyMessageFormat},[n.createElement("a",{href:u.ConcurrencyDocumentLink,target:"_blank",rel:"noopener noreferrer",key:0},u.ConcurrencyDocumentLinkName),n.createElement("a",{href:this.concurrentJobsLink,target:"_blank",rel:"noopener noreferrer",key:1},u.CocurrentJobLimitsLinkName)]))}}s.componentType="pipelineBillingBanner",r.VssComponent.register(s.componentType,s)}()},["Resources","ReleaseMenuService","RunActionService","Components/PipelineBillingMessageBanner"]),document.dispatchEvent(new CustomEvent("scriptLoaded",{cancelable:!1,detail:{id:"ms.vss-releaseManagement-web.sharedcontributions"}}));